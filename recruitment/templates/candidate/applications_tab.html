{% load i18n %}
{% load static %}
{% load recruitmentfilters %}

<div class="oh-card">
    <div class="oh-card__header">
        <h4 class="oh-card__title">{% trans "Job Applications" %}</h4>
    </div>
    
    <div class="oh-card__body">
        {% if applications %}
            <div class="oh-table">
                <div class="oh-table__header">
                    <div class="oh-table__row">
                        <div class="oh-table__cell">{% trans "Recruitment" %}</div>
                        <div class="oh-table__cell">{% trans "Job Position" %}</div>
                        <div class="oh-table__cell">{% trans "Stage Type" %}</div>
                        <div class="oh-table__cell">{% trans "Date" %}</div>
                    </div>
                </div>
                <div class="oh-table__body">
                    {% for application in applications %}
                    <div class="oh-table__row">
                        <div class="oh-table__cell">
                            {{ application.recruitment_id.title|default:"N/A" }}
                        </div>
                        <div class="oh-table__cell">
                            {{ application.job_position_id.job_position|default:"N/A" }}
                        </div>
                        <div class="oh-table__cell">
                            {% if application.stage_id %}
                                <span class="oh-badge oh-badge--info">
                                    {{ application.stage_id.get_stage_type_display|default:application.stage_id.stage_type }}
                                </span>
                            {% else %}
                                <span class="oh-badge oh-badge--warning">{% trans "No Stage" %}</span>
                            {% endif %}
                        </div>
                        <div class="oh-table__cell">
                            {{ application.last_updated|date:"M d, Y" }}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        {% else %}
            <div class="oh-empty-state">
                <div class="oh-empty-state__icon">
                    <ion-icon name="document-outline"></ion-icon>
                </div>
                <h5 class="oh-empty-state__title">{% trans "No Applications Found" %}</h5>
                <p class="oh-empty-state__text">
                    {% trans "It looks like there are no applications for this candidate yet." %}
                </p>
                <div class="oh-empty-state__actions">
                    <a href="{% url 'candidate-application-create' %}?candidate_id={{ candidate.id }}" 
                       class="oh-btn oh-btn--primary">
                        <ion-icon name="add-outline"></ion-icon>
                        {% trans "Add New Application" %}
                    </a>
                </div>
            </div>
        {% endif %}
    </div>
</div>

<style>
/* Ensure horizontal table layout */
.oh-table {
    display: table;
    width: 100%;
    border-collapse: collapse;
}

.oh-table__header {
    display: table-header-group;
}

.oh-table__body {
    display: table-row-group;
}

.oh-table__row {
    display: table-row;
}

.oh-table__cell {
    display: table-cell;
    padding: 12px 8px;
    border-bottom: 1px solid #e9ecef;
    vertical-align: middle;
}

.oh-table__header .oh-table__cell {
    font-weight: 600;
    background-color: #f8f9fa;
    border-bottom: 2px solid #dee2e6;
}

.oh-badge {
    font-size: 0.75rem;
    padding: 4px 8px;
    border-radius: 4px;
}

.oh-badge--info {
    background-color: #17a2b8;
    color: white;
}

.oh-badge--warning {
    background-color: #ffc107;
    color: #212529;
}

.oh-empty-state {
    text-align: center;
    padding: 40px 20px;
}

.oh-empty-state__icon {
    font-size: 48px;
    color: #ccc;
    margin-bottom: 16px;
}

.oh-empty-state__title {
    margin-bottom: 8px;
    color: #333;
}

.oh-empty-state__text {
    color: #666;
    margin-bottom: 24px;
}
</style> 